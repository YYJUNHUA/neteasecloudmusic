<template>
  <!-- Swiper -->
  <div class="my-swiper">
    <div class="swiper-container" ref="mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
        <div class="swiper-slide my-swiper-slide">
          <div
            class="slide-disc"
            @mouseover="mouseOverPlayVisble"
            @mouseleave="mouseLeavePlayVisble"
            ref="newDiscIconPlay"
          >
            <img src="./images/test.jpg" alt="" />
            <a class="slide-msk" title="现在是什么时辰了" href="/#"></a>
            <a class="slide-icon-play icon-all" title="播放" href="/#"></a>
          </div>
          <p class="slide-text">
            <a class="slide-name" title="现在是什么时辰了" href="/#"
              >现在是什么时辰了</a
            >
          </p>
          <p class="slide-text">
            <a class="slide-author" href="/#">田馥甄</a>
          </p>
        </div>
      </div>
    </div>
    <!-- 左右按钮 -->
    <div class="swiper-button-next my-button-next"></div>
    <div class="swiper-button-prev my-button-prev"></div>
  </div>
</template>

<script>
import Swiper from "swiper";

export default {
  name: "DiscoverNewDiscCarousel",
  data() {
    return {
      mySwiper: {},
    };
  },
  mounted() {
    this._initSwiper();
  },
  methods: {
    _initSwiper() {
      this.mySwiper = new Swiper(this.$refs.mySwiper, {
        direction: "horizontal", // 垂直切换选项
        loop: true, // 循环模式选项
        slidesPerView: 5, // 能够同时显示的数量
        slidesPerGroup: 5,  // 一组显示的数量
        loopFillGroupWithBlank: true, // 循环模式下多出来的填充空白

        // 前进后退按钮
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });
    },
    // 事件委派，鼠标进入|鼠标离开事件
    mouseOverPlayVisble() {
      let a = this.$refs.newDiscIconPlay.childNodes[2];
      a.style.display = "inline-block";
    },
    mouseLeavePlayVisble() {
      let a = this.$refs.newDiscIconPlay.childNodes[2];
      a.style.display = "none";
    },
  },
};
</script>

<style lang="scss" scoped>
.swiper-icon-index {
  background: url(~@/views/Discover/images/index.png) no-repeat;
}
.swiper-icon-coverall {
  background: url(~@/views/Discover/images/coverall.png) no-repeat;
}
.my-button-public {
  position: absolute;
  top: 71px;
  width: 17px;
  height: 17px;
  margin-top: 0;
}

// 清除默认样式
.swiper-button-next,
.swiper-button-prev {
  &:after {
    display: none;
  }
}

.my-swiper {
  // swiper 容器
  .swiper-container {
    float: left;
    width: 645px;
    height: 180px;
    margin-top: 28px;
    overflow: hidden;

    .my-swiper-slide {
      @extend .swiper-icon-index;
      float: left;
      display: inline;
      width: 118px !important;
      height: 150px;
      margin-left: 11px;
      margin-right: 0 !important;
      background-position: -260px 100px;
      .slide-disc {
        position: relative;
        display: block;
        width: 100px;
        height: 100px;
        margin-bottom: 7px;
        img {
          display: block;
          width: 100%;
          height: 100%;
        }
        // 图片的 a 标签 使得图片可点击
        .slide-msk {
          @extend .swiper-icon-coverall;
          position: absolute;
          top: 0;
          left: 0;
          width: 118px;
          height: 100px;
          background-position: 0 -570px;
        }

        // 播放按钮
        .slide-icon-play {
          display: none;
          position: absolute;
          right: 10px;
          bottom: 5px;
          left: 72px;
          width: 22px;
          height: 22px;
          background-position: 0 -85px;
          &:hover {
            background-position: 0 -110px;
          }
        }
      }

      .slide-name {
        color: #000;
        &:hover {
          text-decoration: underline;
        }
      }
      .slide-author {
        color: #666;
        &:hover {
          text-decoration: underline;
        }
      }

      // 新碟上架文本区域
      .slide-text {
        width: 90%;
        line-height: 18px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        word-wrap: normal;
      }
    }
  }
  // 自定义后退按钮
  .my-button-prev {
    @extend .swiper-icon-index;
    @extend .my-button-public;
    left: 4px;
    background-position: -260px -75px;
  }
  // 自定义前进按钮
  .my-button-next {
    @extend .swiper-icon-index;
    @extend .my-button-public;
    background-position: -300px -75px;
  }
}
</style>